{% liquid
  assign display_recent_posts = section.settings.recent-posts
  assign display_tags = section.settings.tag-list
  assign should_display_sidebar = false

  if display_recent_posts
    assign should_display_sidebar = true
  elsif display_tags and blog.all_tags.size > 0
    assign should_display_sidebar = true
  endif
%}

<script
  type="application/json"
  data-section-type="static-article"
  data-section-id="{{ section.id }}"
  data-section-index="{{ section.index }}"
>
</script>

<section
  class="
    content
    content-area
    {% if should_display_sidebar %}
      blog-sidebar-active
    {% endif %}
  "
>
  {% if section.settings.show_breadcrumbs %}
    {% render 'breadcrumbs' %}
  {% endif %}

  <div class="page-title">
    <h2 class="label"><a href="{{ blog.url }}">{{ blog.title }}</a></h2>
  </div>

  <div class="blog content-wrap">
    <section class="blog-article">
      {%
        render 'article-item',
        article: article,
        show_date: section.settings.show_date,
        show_featured_image: section.settings.show_featured_image,
        show_author: section.settings.show_author,
        show_tags: section.settings.show_tags,
      %}
    </section>

    {% if should_display_sidebar %}
      {%
        render 'blog-sidebar',
        blog: blog,
        display_recent_posts: display_recent_posts,
        display_tags: display_tags,
      %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Article pages",
  "class": "section-article",
  "settings": [
    {
      "type": "header",
      "content": "General"
    },
    {
      "type": "checkbox",
      "id": "show_breadcrumbs",
      "label": "Show breadcrumbs",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show-share",
      "label": "Enable social sharing",
      "default": true
    },
    {
      "type": "header",
      "content": "Blog posts"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show date",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_featured_image",
      "label": "Show featured image",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_author",
      "label": "Show author",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show post tags",
      "default": true
    },
    {
      "type": "header",
      "content": "Sidebar"
    },
    {
      "type": "checkbox",
      "id": "recent-posts",
      "label": "Show recent posts",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "tag-list",
      "label": "Show all tags",
      "default": true
    }
  ]
}

{% endschema %}